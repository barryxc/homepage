---
title: 特殊成员函数
date: 2021-12-22 23:53:23
tags: c++
category: c++
---

在C++中，特殊成员函数是那些可能由编译器隐式声明和定义的类成员函数。它们是类的生命周期和对象管理的关键部分。以下是C++中的特殊成员函数：

1. **默认构造函数 (Default Constructor)**: 这是一个不接受任何参数，或者每个参数都有默认值的构造函数。如果你没有定义任何构造函数，编译器会为你提供一个默认的无参构造函数。
2. **拷贝构造函数 (Copy Constructor)**: 它用于创建一个新对象作为另一个现有对象的副本。如果不定义，编译器会定义一个默认的拷贝构造函数，进行成员到成员的复制。
3. **拷贝赋值操作符 (Copy Assignment Operator)**: 当通过赋值操作将一个对象的内容复制到另一个现有对象中时，会调用这个特殊成员函数。默认的拷贝赋值操作符也执行成员到成员的复制。
4. **移动构造函数 (Move Constructor)**: 在C++11中引入，允许资源的转移而非复制。如果一个对象拥有资源，如动态内存，移动构造函数可以将资源从一个对象转移到另一个对象，通常是为了提高性能。
5. **移动赋值操作符 (Move Assignment Operator)**: 类似于移动构造函数，它允许你通过移动而非复制一个对象的资源来给另一个对象赋值。这通常发生在具有右值引用参数的赋值操作中。
6. **析构函数 (Destructor)**: 当对象生命周期结束时，例如对象离开作用域或被`delete`调用时，析构函数被调用来进行清理工作，比如释放资源等。

<!--more-->

每个特殊成员函数都有其自动生成（隐式声明）的条件。例如，如果你提供了自己的拷贝构造函数，编译器就不会自动生成默认构造函数。但你可以通过在类内使用`= default;`来向编译器显式请求生成这些函数的默认版本。

```c++
class MyClass {
public:
    MyClass() = default; // 显式默认构造函数
    MyClass(const MyClass& other) = default; // 显式拷贝构造函数
    MyClass(MyClass&& other) = default; // 显式移动构造函数
  
    MyClass& operator=(const MyClass& other) = default; // 显式拷贝赋值操作符
    MyClass& operator=(MyClass&& other) = default; // 显式移动赋值操作符
  
    ~MyClass() = default; // 显式析构函数
};
```

注意，默认的特殊成员函数只能进行简单的成员到成员拷贝或移动，它们不会为复杂的所有权或资源管理逻辑提供自定义行为。对于需要进行深拷贝或复杂资源管理的类，你需要手动提供这些特殊成员函数的实现。
